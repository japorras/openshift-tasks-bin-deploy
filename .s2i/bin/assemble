#!/bin/bash

# Download and place binary in JBoss. JAR_FILE_USER variable is specified as
# an environment variable in the BuildConfig
if [ -z "$JAR_FILE_USER" ]; then
  echo "No JAR_FILE_USER environment variable found"
else
  echo "Found WAR_FILE_URL environment variable for downloading artifact!"
  echo "Executing curl -u $JAR_FILE_USER:$JAR_FILE_PASSWORD -o $JAVA_DATA_DIR/springboot.jar -O $JAR_FILE_URL"
  curl -u $JAR_FILE_USER:$JAR_FILE_PASSWORD -o /opt/app-root/spring-boot.jar -O -k $JAR_FILE_URL
fi

# Call default assemble script
/usr/local/s2i/assemble